<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html"
      xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Restaurante Sol</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
            integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
            integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
            crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <link rel="stylesheet" href="assets/css/style.css">
    <script src="components/header.js" type="text/javascript" defer></script>
    <script src="components/footer.js" type="text/javascript" defer></script>
</head>
<body class="custom-bg">
<header-component></header-component>
<div class="container">
    <!-- Content here -->
    <div class="row justify-content-center">
        <div class="col-12">
            <div class="row">
                <div class="card card-menu align-items-start">
                    <div class="row card-header">
                        <div class="col-12">
                            <h2>
                                <span class="float-left">Carta</span>
                            </h2>
                        </div>
                    </div>
                    <div class="row card-body container-fluid h-100">
                        <div class="d-none d-lg-block col-lg-4" id="carta-index">

                        </div>
                        <div class="col-lg-8" id="carta-content">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<footer-component></footer-component>

<script>
    $(document).ready(function () {
        $.getJSON("./assets/data/menu-raw.json", function (data) {
            var parsedData = {};
            data.forEach(function (row) {
                let category = row["category"];
                if (!category) {
                    return;
                }
                if (!parsedData.hasOwnProperty(category)) {
                    parsedData[category] = [];
                }
                parsedData[category].push(row);
            });

            var html = '';
            var indexHtml = '<ul>';
            for (var category in parsedData) {
                /* category section */
                if (category.toLocaleLowerCase() == "refrescos" || category.toLocaleLowerCase() == "salsas" || category.toLocaleLowerCase() == "postre") {
                    html += '<div class="mt-5"></div>';
                }
                let catAnchor = btoa(category);

                indexHtml += '<li><a href="#' + catAnchor + '">' + category.toUpperCase() + '</a></li>';

                html += '<div class="col-lg-10 float-left"><h4 id="' + catAnchor + '">' + category +
                    '</h4>'

                /* dessert list */
                for (var index in parsedData[category]) {
                    html += '<p>';
                    if (parsedData[category][index]['cod']) {
                        html += '<span>(' + parsedData[category][index]['cod'] + ') </span>';
                    }

                    let dessert = parsedData[category][index]['name'].charAt(0) + parsedData[category][index]['name'].substring(1).toLowerCase();

                    html += '<span>' + dessert + '</span>';
                    html += '<span> ' + parsedData[category][index]['salon'] + '</span>';
                    html += '</p>';
                }

                html += '</div>';
            }

            indexHtml += '</ul>';

            $("#carta-index").append(indexHtml);
            $("#carta-content").append(html);

        }).fail(function () {
            console.log("An error has occurred.");
        });
    });
</script>
</body>
<html>